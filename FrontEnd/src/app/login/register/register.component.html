<h4 class="text-center">
  <b> {{ 'Register' | translate }} </b>
</h4>
<form nz-form [formGroup]="registerForm" (ngSubmit)="submitForm()">
  <section>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24">
        <input
          nz-input
          type="text"
          [placeholder]="'Organization' | translate"
          id="organization"
          formControlName="organization"
        />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24">
        <input nz-input type="text" [placeholder]="'Address' | translate" id="address" formControlName="address" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24">
        <div nz-row [nzGutter]="8">
          <div nz-col [nzSpan]="12">
            <input
              nz-input
              [placeholder]="'EmailOrganization' | translate"
              formControlName="emailOrganization"
              id="emailOrganization"
            />
          </div>
          <div nz-col [nzSpan]="12">
            <input
              nz-input
              [placeholder]="'PhoneOrganization' | translate"
              formControlName="phoneOrganization"
              id="phoneOrganization"
            />
          </div>
        </div>
      </nz-form-control>
    </nz-form-item>
  </section>
  <hr />
  <section>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24">
        <input nz-input [placeholder]="'Email' | translate" formControlName="email" id="email" />
        <div ngxErrors="email">
          <div *ngFor="let error of errors" [ngxError]="error.name" [when]="error.rules">
            <nz-form-explain translate class="errors">
              {{ 'Email is required' | translate }}
            </nz-form-explain>
          </div>
        </div>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24">
        <div nz-row [nzGutter]="8">
          <div nz-col [nzSpan]="12">
            <input
              nz-input
              type="text"
              [placeholder]="'FullName' | translate"
              id="fullName"
              formControlName="fullName"
            />
            <div ngxErrors="fullName">
              <div *ngFor="let error of errors" [ngxError]="error.name" [when]="error.rules">
                <nz-form-explain translate class="errors">
                  {{ 'FullName is required' | translate }}
                </nz-form-explain>
              </div>
            </div>
          </div>
          <div nz-col [nzSpan]="12">
            <input
              disabled
              nz-input
              type="text"
              [placeholder]="'UserId' | translate"
              id="userId"
              formControlName="userId"
            />
          </div>
        </div>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24">
        <div nz-row [nzGutter]="8">
          <div nz-col [nzSpan]="12">
            <nz-date-picker formControlName="ngaySinh" [nzFormat]="dateFormat"></nz-date-picker>
          </div>
          <div nz-col [nzSpan]="12">
            <label nz-checkbox formControlName="gioiTinh">
              <span> {{ 'Gender' | translate }}</span>
            </label>
          </div>
        </div>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24" [nzValidateStatus]="registerForm.controls['phoneNumber']">
        <nz-input-group [nzAddOnBefore]="addOnBeforeTemplate">
          <ng-template #addOnBeforeTemplate>
            <nz-select formControlName="phoneNumberPrefix" style="width: 70px">
              <nz-option nzLabel="+84" nzValue="+84"></nz-option>
            </nz-select>
          </ng-template>
          <input formControlName="phoneNumber" [placeholder]="'Phone' | translate" id="'phoneNumber'" nz-input />
        </nz-input-group>
        <div ngxErrors="phoneNumber">
          <div *ngFor="let error of errors" [ngxError]="error.name" [when]="error.rules">
            <nz-form-explain translate class="errors">
              {{ 'Phone is required' | translate }}
            </nz-form-explain>
          </div>
        </div>
      </nz-form-control>
    </nz-form-item>
  </section>
  <hr />
  <section>
    <nz-form-item>
      <nz-form-control [nzOffset]="6" [nzSm]="14" [nzXs]="24">
        <div nz-row [nzGutter]="8">
          <div nz-col [nzSpan]="12">
            <nz-input-group [nzSuffix]="suffixTemplate">
              <input
                nz-input
                [type]="passwordVisible ? 'text' : 'password'"
                id="password"
                [placeholder]="'Password' | translate"
                formControlName="password"
                (ngModelChange)="updateConfirmValidator()"
              />
            </nz-input-group>
            <ng-template #suffixTemplate>
              <i
                nz-icon
                [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                (click)="passwordVisible = !passwordVisible"
              ></i>
            </ng-template>
            <div ngxErrors="password">
              <div *ngFor="let error of errors" [ngxError]="error.name" [when]="error.rules">
                <nz-form-explain translate class="errors">
                  {{ 'Password is required' | translate }}
                </nz-form-explain>
              </div>
            </div>
          </div>
          <div nz-col [nzSpan]="12">
            <nz-input-group [nzSuffix]="templateCheckPass">
              <input
                nz-input
                [type]="checkPasswordVisible ? 'text' : 'password'"
                [placeholder]="'Confirm' | translate"
                formControlName="checkPassword"
                id="checkPassword"
              />
            </nz-input-group>
            <ng-template #templateCheckPass>
              <i
                nz-icon
                [nzType]="checkPasswordVisible ? 'eye-invisible' : 'eye'"
                (click)="checkPasswordVisible = !checkPasswordVisible"
              ></i>
            </ng-template>

            <nz-form-explain
              *ngIf="registerForm.get('checkPassword')?.dirty && registerForm.get('checkPassword')?.errors"
            >
              <ng-container *ngIf="registerForm.get('checkPassword')?.hasError('required')">
                {{ 'Please confirm your password!' | translate }}
              </ng-container>
              <ng-container *ngIf="registerForm.get('checkPassword')?.hasError('confirm')">
                {{ 'Two passwords that you enter is inconsistent!' | translate }}
              </ng-container>
            </nz-form-explain>
          </div>
        </div>
      </nz-form-control>
    </nz-form-item>
  </section>

  <nz-form-item nz-row style="margin-bottom: 8px">
    <nz-form-control [nzSpan]="14" [nzOffset]="6">
      <label nz-checkbox formControlName="agree">
        <span>I have read the <a>agreement</a></span>
      </label>
    </nz-form-control>
  </nz-form-item>
  <nz-form-item nz-row style="margin-bottom: 8px">
    <nz-form-item nz-row style="margin-bottom: 8px">
      <nz-form-control [nzOffset]="16" [nzSpan]="8">
        <button [routerLink]="['/login']" routerLinkActive="router-link-active" nz-button nzType="default" translate>
          {{ 'Back' | translate }}
        </button>
        <button class="margin-left-8" [disabled]="registerForm.invalid" nz-button nzType="primary" translate>
          {{ 'Register' | translate }}
        </button>
      </nz-form-control>
    </nz-form-item>
  </nz-form-item>
</form>
